<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RenewFit Liability Waiver Agreement</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f7f7f7; }
        .color-primary { background-color: #0F766E; } /* Dark Teal */
        .text-primary { color: #0F766E; }
    </style>
</head>
<body class="antialiased p-4">

    <div class="max-w-4xl mx-auto my-10 bg-white p-8 rounded-2xl shadow-xl">
        <h1 class="text-3xl font-bold text-primary mb-6 text-center">RenewFit Liability Waiver & Release</h1>
        <p class="text-sm font-semibold text-red-600 mb-4 text-center">
            **IMPORTANT:** This document must be agreed to before accessing the RenewFit Protocol.
        </p>

        <!-- Waiver Content Display Area -->
        <div class="h-96 overflow-y-scroll border border-gray-300 p-4 rounded-lg bg-gray-50 mb-6 text-sm leading-relaxed">
            <h3 class="font-bold text-lg mb-2 text-gray-800">1. Parties to the Agreement</h3>
            <p>This Liability Waiver and Release of Claims ("Agreement") is made between the undersigned Client ("I," "My," or "Client") and RenewFit, its owner, agents, employees, coaches, and representatives (collectively, "RenewFit").</p>

            <h3 class="font-bold text-lg mt-4 mb-2 text-gray-800">2. Assumption of Risk and Physical Condition</h3>
            <p>I acknowledge that participation in any fitness, strength training, or wellness program, including the RenewFit Protocol (CORE, ELEVATE, APEX, or any other content), involves inherent risks of injury, muscle soreness, strain, injury to joints or ligaments, or other physical ailments.</p>
            <p>I understand that my decision to follow the RenewFit Protocol is entirely voluntary and is taken **at my own risk.** I fully assume all risks associated with my participation in this program, including but not limited to the risks associated with my current physical condition, any pre-existing health conditions, and any side effects or changes resulting from GLP-1 medication use.</p>

            <h3 class="font-bold text-lg mt-4 mb-2 text-gray-800">3. Medical Disclaimer and Health Clearance</h3>
            <p>I understand and agree to the following:</p>
            <ul class="list-disc pl-5 space-y-1">
                <li>RenewFit coaches and content are **not** licensed medical professionals (such as a doctor, nurse, or registered dietitian). The guidance provided is for informational and educational purposes only.</li>
                <li>RenewFit does not provide medical diagnosis, treatment, or therapy. The information provided is **not a substitute** for professional medical advice.</li>
                <li>I affirm and warrant that I have consulted with a competent physician, who has reviewed all of my medical conditions and has **expressly approved me** to participate in a physical fitness program, including strength training. I agree to continually monitor my health and immediately consult my physician if I experience any adverse effects, pain, or discomfort.</li>
            </ul>

            <h3 class="font-bold text-lg mt-4 mb-2 text-gray-800">4. Release of Liability and Indemnification</h3>
            <p>In consideration of being permitted to participate in the RenewFit Protocol, I hereby irrevocably release, waive, discharge, and covenant not to sue RenewFit from any and all liability, claims, demands, or causes of action which are in any way connected with my participation in the program or my use of the RenewFit content, including any claims based on the alleged negligence of RenewFit.</p>
            <p>I agree to indemnify (hold harmless) RenewFit from any loss, liability, damage, or cost I may incur due to my participation in the program, whether caused by the negligence of RenewFit or otherwise.</p>
            
            <h3 class="font-bold text-lg mt-4 mb-2 text-gray-800">5. Client Acknowledgment</h3>
            <p>I certify that I have read this Agreement, I fully understand its terms, and I voluntarily agree to be bound by them. I understand that by signing this, I am giving up substantial rights, including my right to sue.</p>
        </div>

        <!-- Signature Area -->
        <form id="waiverForm" class="space-y-4">
            <div class="flex items-center space-x-3 p-3 bg-red-50 rounded-lg border border-red-200">
                <input type="checkbox" id="agreement" required class="form-checkbox h-5 w-5 text-red-600 rounded">
                <label for="agreement" class="text-sm font-medium text-gray-700">I have read the full waiver above and electronically agree to all terms and conditions.</label>
            </div>
            
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700">Full Legal Name (Electronic Signature):</label>
                <input type="text" id="name" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
            </div>

            <div>
                <label for="date" class="block text-sm font-medium text-gray-700">Date:</label>
                <input type="date" id="date" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
            </div>

            <button type="submit" id="submitButton" class="w-full px-4 py-3 color-primary text-white font-bold rounded-lg hover:opacity-90 transition duration-150 shadow-md">
                Acknowledge & Access Program
            </button>
        </form>
        
        <!-- Confirmation and PDF Link Area (Initially Hidden) -->
        <div id="confirmationArea" class="mt-6 p-6 bg-green-50 border border-green-200 rounded-lg hidden text-center">
            <p class="text-lg font-semibold text-green-700 mb-4">Agreement Complete! Thank you.</p>
            <p class="text-gray-600 mb-4">You are now being redirected to the payment page.</p>
        </div>

        <!-- Hidden Loading Message -->
        <p id="loadingMessage" class="mt-4 text-center text-primary font-medium hidden">
            Submitting waiver, please wait...
        </p>

        <!-- Hidden Error Message -->
        <p id="errorMessage" class="mt-4 text-center text-red-600 font-medium hidden">
            ⚠️ Submission failed. Please try again or check your network connection.
        </p>
    </div>

    <script>
        // --- CONFIGURATION ---
        // 1. REPLACE THIS URL with the unique Web App URL generated from your Google Sheet Script. (See instructions below)
        const GOOGLE_APP_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzG56V_XfBU5KGehFtvF2qadzfLm9mjF3KIYYLP4WLuzr3eR0ibsNrITk5vSr2p600g/exec';
        
        // 2. REPLACE THIS URL with your payment site link.
        const PAYMENT_REDIRECT_URL = 'https://buy.stripe.com/test_cNiaEQ7Du4Mi1ivcpA97G02'; 
        
        // --- CORE LOGIC ---
        
        document.getElementById('waiverForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Get elements
            const submitButton = document.getElementById('submitButton');
            const loadingMessage = document.getElementById('loadingMessage');
            const errorMessage = document.getElementById('errorMessage');
            const nameInput = document.getElementById('name');
            const dateInput = document.getElementById('date');
            const agreementInput = document.getElementById('agreement');
            
            // Collect data using IDs and map to the expected Google Sheet column names
            const data = {
                ClientName: nameInput.value.trim(),
                SignatureDate: dateInput.value,
                Agreement: agreementInput.checked ? 'Yes' : 'No',
                Program: 'APEX', // Identify the program for the sheet
                Timestamp: new Date().toISOString()
            };

            // Display loading state
            submitButton.disabled = true;
            submitButton.textContent = 'Processing...';
            loadingMessage.classList.remove('hidden');
            errorMessage.classList.add('hidden');

            // POST data to the Google Apps Script endpoint
            fetch(GOOGLE_APP_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // Must use 'no-cors' for this public endpoint
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(data).toString()
            })
            .then(() => {
                // Success path (Note: We rely on the fetch resolving, which happens even if the script fails, 
                // but since CORE and ELEVATE work, we assume the script endpoint is valid.)
                loadingMessage.classList.add('hidden');
                document.getElementById('confirmationArea').classList.remove('hidden');

                // Redirect client after a brief pause
                setTimeout(() => {
                    window.location.href = PAYMENT_REDIRECT_URL;
                }, 1500); // 1.5 second pause for visual confirmation
            })
            .catch(error => {
                // Error path
                console.error('Submission Error:', error);
                submitButton.disabled = false;
                submitButton.textContent = 'Acknowledge & Proceed to Payment';
                loadingMessage.classList.add('hidden');
                errorMessage.classList.remove('hidden');
                
                // Clear the error message after a few seconds
                setTimeout(() => {
                    errorMessage.classList.add('hidden');
                }, 5000);
            });
        });
    </script>
</body>
</html>
