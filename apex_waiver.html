<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RenewFit Liability Waiver Agreement - APEX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f7f7f7; }
        .color-primary { background-color: #0F766E; } /* Dark Teal */
        .text-primary { color: #0F766E; }
    </style>
</head>
<body class="antialiased p-4">

    <div class="max-w-4xl mx-auto my-10 bg-white p-8 rounded-2xl shadow-xl">
        <h1 class="text-3xl font-bold text-primary mb-6 text-center">RenewFit Liability Waiver & Release</h1>
        <p class="text-sm font-semibold text-red-600 mb-4 text-center">
            <strong>IMPORTANT:</strong> This document must be agreed to before proceeding to program access.
        </p>

        <!-- Waiver Content Display Area -->
        <div class="h-96 overflow-y-scroll border border-gray-300 p-4 rounded-lg bg-gray-50 mb-6 text-sm leading-relaxed">
            <h3 class="font-bold text-lg mb-2 text-gray-800">1. Parties to the Agreement</h3>
            <p>This Liability Waiver and Release of Claims ("Agreement") is made between the undersigned Client ("I," "My," or "Client") and RenewFit, its owner, agents, employees, coaches, and representatives (collectively, "RenewFit").</p>

            <h3 class="font-bold text-lg mt-4 mb-2 text-gray-800">2. Assumption of Risk and Physical Condition</h3>
            <p>I acknowledge that participation in any fitness, strength training, or wellness program, including the RenewFit Protocol (CORE, ELEVATE, APEX, or any other content), involves inherent risks of injury, muscle soreness, strain, injury to joints or ligaments, or other physical ailments.</p>
            <p>I understand that my decision to follow the RenewFit Protocol is entirely voluntary and is taken <strong>at my own risk.</strong> I fully assume all risks associated with my participation in this program, including but not limited to the risks associated with my current physical condition, any pre-existing health conditions, and any side effects or changes resulting from GLP-1 medication use.</p>

            <h3 class="font-bold text-lg mt-4 mb-2 text-gray-800">3. Medical Disclaimer and Health Clearance</h3>
            <p>I understand and agree to the following:</p>
            <ul class="list-disc pl-5 space-y-1">
                <li>RenewFit coaches and content are <strong>not</strong> licensed medical professionals. The guidance provided is for informational and educational purposes only.</li>
                <li>RenewFit does not provide medical diagnosis, treatment, or therapy. The information provided is <strong>not a substitute</strong> for professional medical advice.</li>
                <li>I affirm and warrant that I have consulted with a competent physician who has reviewed all of my medical conditions and has <strong>expressly approved me</strong> to participate in a physical fitness program, including strength training.</li>
            </ul>

            <h3 class="font-bold text-lg mt-4 mb-2 text-gray-800">4. Release of Liability and Indemnification</h3>
            <p>In consideration of being permitted to participate in the RenewFit Protocol, I hereby irrevocably release, waive, discharge, and covenant not to sue RenewFit from any and all liability, claims, demands, or causes of action which are in any way connected with my participation in the program or my use of the RenewFit content, including any claims based on the alleged negligence of RenewFit.</p>
            <p>I agree to indemnify (hold harmless) RenewFit from any loss, liability, damage, or cost I may incur due to my participation in the program, whether caused by the negligence of RenewFit or otherwise.</p>
            
            <h3 class="font-bold text-lg mt-4 mb-2 text-gray-800">5. Client Acknowledgment</h3>
            <p>I certify that I have read this Agreement, I fully understand its terms, and I voluntarily agree to be bound by them. I understand that by signing this, I am giving up substantial rights, including my right to sue.</p>
        </div>

        <!-- Signature Area -->
        <form id="waiverForm" class="space-y-4">
            <div class="flex items-center space-x-3 p-3 bg-red-50 rounded-lg border border-red-200">
                <input type="checkbox" id="agreement" name="Agreement" value="Yes" required class="form-checkbox h-5 w-5 text-red-600 rounded">
                <label for="agreement" class="text-sm font-medium text-gray-700">I have read the full waiver above and electronically agree to all terms and conditions.</label>
            </div>
            
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700">Full Legal Name (Electronic Signature):</label>
                <input type="text" id="name" name="ClientName" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
            </div>

            <div>
                <label for="date" class="block text-sm font-medium text-gray-700">Date:</label>
                <input type="date" id="date" name="SignatureDate" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
            </div>

            <!-- FIXED BUTTON VISIBILITY: same as CORE -->
            <button type="submit" id="submitButton" class="w-full px-4 py-3 color-primary text-white font-bold rounded-lg shadow-md hover:opacity-90 transition duration-150">
                Acknowledge & Proceed to Payment
            </button>

            <p id="loadingMessage" class="hidden text-center text-sm text-primary mt-2">Saving signature... redirecting shortly.</p>
            <p id="errorMessage" class="hidden text-center text-sm text-red-600 mt-2">There was an error saving your signature. Please refresh and try again.</p>
        </form>
        
        <!-- Confirmation Area -->
        <div id="confirmationArea" class="mt-6 p-6 bg-green-50 border border-green-200 rounded-lg hidden text-center">
            <p class="text-lg font-semibold text-green-700 mb-4">Agreement Complete!</p>
            <p class="text-gray-600 mb-4">You are now being redirected to the payment page.</p>
        </div>
    </div>

    <script>
        const GOOGLE_APP_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzG56V_XfBU5KGehFtvF2qadzfLm9mjF3KIYYLP4WLuzr3eR0ibsNrITk5vSr2p600g/exec';
        const PAYMENT_REDIRECT_URL = 'https://buy.stripe.com/test_cNiaEQ7Du4Mi1ivcpA97G02';

        document.getElementById('waiverForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const form = event.target;
            const submitButton = document.getElementById('submitButton');
            const loadingMessage = document.getElementById('loadingMessage');
            const errorMessage = document.getElementById('errorMessage');

            const data = {
                ClientName: form.ClientName.value.trim(),
                SignatureDate: form.SignatureDate.value,
                Agreement: form.Agreement.checked ? 'Yes' : 'No',
                Program: 'APEX',
                Timestamp: new Date().toISOString()
            };

            submitButton.disabled = true;
            submitButton.textContent = 'Processing...';
            loadingMessage.classList.remove('hidden');
            errorMessage.classList.add('hidden');

            fetch(GOOGLE_APP_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                cache: 'no-cache',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: new URLSearchParams(data).toString()
            })
            .then(() => {
                loadingMessage.classList.add('hidden');
                document.getElementById('confirmationArea').classList.remove('hidden');

                setTimeout(() => {
                    window.location.href = PAYMENT_REDIRECT_URL;
                }, 1500);
            })
            .catch(error => {
                console.error('Submission Error:', error);
                submitButton.disabled = false;
                submitButton.textContent = 'Acknowledge & Proceed to Payment';
                loadingMessage.classList.add('hidden');
                errorMessage.classList.remove('hidden');

                setTimeout(() => { errorMessage.classList.add('hidden'); }, 5000);
            });
        });
    </script>
</body>
</html>
